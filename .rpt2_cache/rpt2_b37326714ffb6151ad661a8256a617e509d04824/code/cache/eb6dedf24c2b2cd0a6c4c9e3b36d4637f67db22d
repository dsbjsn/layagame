{
  "code": "import BaseDialogManage from \"./BaseDialogManage\";\r\nimport SkinModle from \"../../modle/SkinModle\";\r\nimport GameHttp from \"../../data/GameHttp\";\r\nimport AldUtil from \"../../utils/AldUtil\";\r\nimport CoinModle from \"../../modle/CoinModle\";\r\nimport WxADUtil from \"../../utils/WxADUtil\";\r\nimport ConfigData from \"../../config/ConfigData\";\r\nimport StaticData from \"../../data/StaticData\";\r\nimport EnumSkinUtil from \"../../data/EnumHttp\";\r\nexport default class GamaOverAwardDialogManage extends BaseDialogManage {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.isTimesGet = true;\r\n        this.coinTimes = 1;\r\n    }\r\n    findView() {\r\n        this.titleSpr = this.contentSpr.getChildByName(\"titleSpr\");\r\n        this.midleBgSpr = this.contentSpr.getChildByName(\"midleBgSpr\");\r\n        this.midleSpr = this.contentSpr.getChildByName(\"midleSpr\");\r\n        this.coinNumberLb = this.contentSpr.getChildByName(\"coinNumberLb\");\r\n        this._3TimesBtn = this.contentSpr.getChildByName(\"_3TimesBtn\");\r\n        this.timeGetLb = this.contentSpr.getChildByName(\"timeGetLb\");\r\n        this.checkBoxSpr = this.contentSpr.getChildByName(\"checkBoxSpr\");\r\n        this.checkBoxSel = this.contentSpr.getChildByName(\"checkBoxSel\");\r\n    }\r\n    initView() {\r\n        StaticData.GetCoinTimesNumber = Math.floor(((StaticData.getLevelData(StaticData.level).stationInfo.x - StaticData.remainderRange) / 200));\r\n        this.coinNum = StaticData.GetCoinTimesNumber;\r\n        this.coinTimes = StaticData.GetCoinTimes;\r\n        this.timeGetLb.text = \"观看视频\" + this.coinTimes + \"倍奖励\";\r\n        this.coinNumberLb.text = \"+\" + (this.coinNum * this.coinTimes);\r\n        this._3TimesBtn.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.timeGetLb.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.checkBoxSpr.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.checkBoxSel.on(Laya.Event.CLICK, this, this.onClickAction);\r\n    }\r\n    initData() {\r\n        AldUtil.upload(EnumSkinUtil.getUseCarSkin());\r\n        AldUtil.upload(EnumSkinUtil.getUseEggSkin());\r\n        SkinModle.freeCarSkinID = \"0\";\r\n        SkinModle.freeEggSkinID = \"0\";\r\n        CoinModle.doubleCoin(false);\r\n        GameHttp.Instance.endGame();\r\n        AldUtil.stageEnd(false);\r\n    }\r\n    adapterWindow() {\r\n        super.adapterWindow();\r\n        this.titleSpr.y += 124 * StaticData.heightOffsetScale;\r\n        this.midleBgSpr.y += 124 * StaticData.heightOffsetScale;\r\n        this.midleSpr.y += 124 * StaticData.heightOffsetScale;\r\n        this.coinNumberLb.y += 124 * StaticData.heightOffsetScale;\r\n        this._3TimesBtn.y += 170 * StaticData.heightOffsetScale;\r\n        this.timeGetLb.y += 170 * StaticData.heightOffsetScale;\r\n        this.checkBoxSpr.y += 170 * StaticData.heightOffsetScale;\r\n        this.checkBoxSel.y += 170 * StaticData.heightOffsetScale;\r\n        this.scaleBYes(this._3TimesBtn);\r\n        this.horizontalLeadOutSpr.setAldPois(\"\\u91D1\\u5E01\\u7FFB\\u500D\\u9875-\\u5BFC\\u51FA\");\r\n        this.horizontalLeadOutSpr.init(true);\r\n    }\r\n    onClickAction(e) {\r\n        switch (e.target.name) {\r\n            case \"_3TimesBtn\":\r\n                this.getCoin();\r\n                break;\r\n            case \"timeGetLb\":\r\n            case \"checkBoxSpr\":\r\n            case \"checkBoxSel\":\r\n                if (this.isTimesGet) {\r\n                    this.isTimesGet = false;\r\n                    this.coinNumberLb.text = \"+\" + this.coinNum;\r\n                }\r\n                else {\r\n                    this.isTimesGet = true;\r\n                    this.coinNumberLb.text = \"+\" + (this.coinNum * this.coinTimes);\r\n                }\r\n                this.checkBoxSel.visible = this.isTimesGet;\r\n                break;\r\n        }\r\n    }\r\n    getCoin() {\r\n        if (this.isTimesGet) {\r\n            WxADUtil.adOrShare({\r\n                success: () => {\r\n                    if (this.coinNum == 3) {\r\n                        AldUtil.upload(\"\\u91D1\\u5E01\\u7FFB\\u500D\\u9875-3\\u500D\\u9886\\u53D6\");\r\n                    }\r\n                    else if (this.coinNum == 5) {\r\n                        AldUtil.upload(\"\\u91D1\\u5E01\\u7FFB\\u500D\\u9875-5\\u500D\\u9886\\u53D6\");\r\n                    }\r\n                    this.coinNum = this.coinTimes * this.coinNum;\r\n                    CoinModle.addCoin(this.coinNum);\r\n                    this.skipNextPage();\r\n                },\r\n                fail: () => {\r\n                    AldUtil.upload(\"\\u91D1\\u5E01\\u7FFB\\u500D\\u9875-\\u666E\\u901A\\u9886\\u53D6\");\r\n                    CoinModle.addCoin(this.coinNum);\r\n                    this.skipNextPage();\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            AldUtil.upload(\"\\u91D1\\u5E01\\u7FFB\\u500D\\u9875-\\u666E\\u901A\\u9886\\u53D6\");\r\n            CoinModle.addCoin(this.coinNum);\r\n            this.skipNextPage();\r\n        }\r\n    }\r\n    skipNextPage() {\r\n        if (this.coinTimes == 5) {\r\n            Laya.Dialog.open(ConfigData.StartGameDialog);\r\n        }\r\n        else {\r\n            Laya.Dialog.open(ConfigData.GameFinishDialog);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaModle/melee/src/manages/dialogManage/BaseDialogManage.ts",
    "E:/LayaModle/melee/src/modle/SkinModle.ts",
    "E:/LayaModle/melee/src/data/GameHttp.ts",
    "E:/LayaModle/melee/src/utils/AldUtil.ts",
    "E:/LayaModle/melee/src/modle/CoinModle.ts",
    "E:/LayaModle/melee/src/utils/WxADUtil.ts",
    "E:/LayaModle/melee/src/config/ConfigData.ts",
    "E:/LayaModle/melee/src/data/StaticData.ts",
    "E:/LayaModle/melee/src/data/EnumHttp.ts",
    "E:/LayaModle/melee/src/data/EnumHttp.ts",
    "E:/LayaModle/melee/src/data/EnumHttp.ts",
    "E:/LayaModle/melee/src/adapter/GamePlatform.ts"
  ]
}
