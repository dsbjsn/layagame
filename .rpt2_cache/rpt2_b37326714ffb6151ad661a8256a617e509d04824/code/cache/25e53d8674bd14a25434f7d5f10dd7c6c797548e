{
  "code": "import SingtonClass from \"../utils/SingtonClass\";\r\nimport StaticData from \"../data/StaticData\";\r\nimport SoundUtil from \"../utils/SoundUtil\";\r\nimport WxADUtil from \"../utils/WxADUtil\";\r\nimport OppoADUtil from \"../utils/OppoADUtil\";\r\nexport default class GamePlatform extends SingtonClass {\r\n    static init() {\r\n        SoundUtil.init();\r\n        switch (GamePlatform.platformName) {\r\n            case GamePlatform.WX:\r\n                this.initWx();\r\n                break;\r\n            case GamePlatform.QQ:\r\n                this.initQq();\r\n                break;\r\n            case GamePlatform.OPPO:\r\n                this.initOppo();\r\n                break;\r\n            case GamePlatform.VIVO:\r\n                this.initVivo();\r\n                break;\r\n            case GamePlatform.IOS:\r\n                this.initIos();\r\n                break;\r\n            case GamePlatform.ANDROID:\r\n                this.initAndroid();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    static initWx() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            GamePlatform.platform = Laya.Browser.window.wx;\r\n            GamePlatform.platform.getSystemInfo({\r\n                success: function (res) {\r\n                    var model = res.model;\r\n                    if (model.search(/iPhone X/i) != -1) {\r\n                        StaticData.setIsIphoneX(true);\r\n                    }\r\n                    else {\r\n                        StaticData.setIsIphoneX(false);\r\n                    }\r\n                }\r\n            });\r\n            WxADUtil.init();\r\n            GamePlatform.platform.onHide(() => {\r\n            });\r\n            GamePlatform.platform.onShow(() => {\r\n                SoundUtil.playBgm();\r\n            });\r\n            GamePlatform.openDataContext = new WxOpenDataContext();\r\n        }\r\n        else {\r\n            StaticData.setIsIphoneX(false);\r\n        }\r\n    }\r\n    static initQq() {\r\n        if (Laya.Browser.onQQMiniGame) {\r\n            GamePlatform.platform = Laya.Browser.window.qq;\r\n            GamePlatform.platform.getSystemInfo({\r\n                success: function (res) {\r\n                    var model = res.model;\r\n                    if (model.search(/iPhone X/i) != -1) {\r\n                        StaticData.setIsIphoneX(true);\r\n                    }\r\n                    else {\r\n                        StaticData.setIsIphoneX(false);\r\n                    }\r\n                }\r\n            });\r\n            WxADUtil.init();\r\n            GamePlatform.platform.onHide(() => {\r\n            });\r\n            GamePlatform.platform.onShow(() => {\r\n                SoundUtil.playBgm();\r\n            });\r\n            GamePlatform.openDataContext = new WxOpenDataContext();\r\n        }\r\n        else {\r\n            StaticData.setIsIphoneX(false);\r\n        }\r\n    }\r\n    static initOppo() {\r\n        StaticData.setIsIphoneX(false);\r\n        GamePlatform.platform = Laya.Browser.window.qg;\r\n        OppoADUtil.init();\r\n        GamePlatform.platform.setEnableDebug({\r\n            enableDebug: false\r\n        });\r\n    }\r\n    static initVivo() { StaticData.setIsIphoneX(false); }\r\n    static initIos() {\r\n        StaticData.setIsIphoneX(false);\r\n    }\r\n    static initAndroid() {\r\n        StaticData.setIsIphoneX(false);\r\n    }\r\n    static topBtnPos(view) {\r\n        if (Laya.Browser.onWeiXin || Laya.Browser.onQQMiniGame) {\r\n            let data = GamePlatform.platform.getMenuButtonBoundingClientRect();\r\n            let off = (data.height * StaticData.clientScale - view.height) / 2;\r\n            view.y = data.top * StaticData.clientScale + off;\r\n        }\r\n        else {\r\n            view.y = 20;\r\n        }\r\n    }\r\n}\r\nGamePlatform.VIVO = \"vivo\";\r\nGamePlatform.OPPO = \"oppo\";\r\nGamePlatform.WX = \"wx\";\r\nGamePlatform.QQ = \"qq\";\r\nGamePlatform.IOS = \"ios\";\r\nGamePlatform.ANDROID = \"android\";\r\nGamePlatform.WB = \"wb\";\r\nGamePlatform.platformName = GamePlatform.WB;\r\nclass WxOpenDataContext {\r\n    createDisplayObject(type, width, height) { return new Laya.WXOpenDataViewer(); }\r\n    ;\r\n    postMessage(obj) { (new Laya.WXOpenDataViewer()).postMsg(obj); }\r\n    ;\r\n}\r\n",
  "references": [
    "E:/LayaModle/melee/src/utils/SingtonClass.ts",
    "E:/LayaModle/melee/src/data/StaticData.ts",
    "E:/LayaModle/melee/src/config/ConfigData.ts",
    "E:/LayaModle/melee/src/utils/SoundUtil.ts",
    "E:/LayaModle/melee/src/utils/WxADUtil.ts",
    "E:/LayaModle/melee/src/data/Api.ts",
    "E:/LayaModle/melee/src/utils/OppoADUtil.ts",
    "E:/LayaModle/melee/src/utils/TipsUtil.ts"
  ]
}
