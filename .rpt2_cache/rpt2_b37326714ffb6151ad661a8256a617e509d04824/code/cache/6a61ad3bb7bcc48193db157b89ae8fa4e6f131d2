{
  "code": "import BaseDialogManage from \"./BaseDialogManage\";\r\nimport StaticData from \"../../data/StaticData\";\r\nimport ConfigData from \"../../config/ConfigData\";\r\nimport GameManage from \"../../manages/GameManage\";\r\nimport LeadOutUtil from \"../../utils/LeadOutUtil\";\r\nimport AldUtil from \"../../utils/AldUtil\";\r\nimport WxADUtil from \"../../utils/WxADUtil\";\r\nimport SignModle from \"../../modle/SignModle\";\r\nimport LocalStorageUtil from \"../../utils/LocalStorageUtil\";\r\nimport GamePlatform from \"../../adapter/GamePlatform\";\r\nimport GameState from \"../../data/GameState\";\r\nimport ThreePartyUtil from \"../../utils/ThreePartyUtil\";\r\nexport default class StartDialogManage extends BaseDialogManage {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.loadTime = 0;\r\n    }\r\n    onEnable() {\r\n        super.onEnable();\r\n        Laya.timer.once(3000, this, () => {\r\n            ThreePartyUtil.showVidoeAd();\r\n        });\r\n    }\r\n    findView() {\r\n        this.horizontalLeadOutSpr = this.owner.getChildByName(\"bottomLeadOut\");\r\n        this.startGameSpr = this.owner.getChildByName('startGameSpr');\r\n        this.startTxtSpr = this.owner.getChildByName('startTxtSpr');\r\n        this.stationNameLb = this.owner.getChildByName(\"stationNameLb\");\r\n        this.nowStationLb = this.owner.getChildByName(\"nowStationLb\");\r\n        this.shopSpr = this.owner.getChildByName('shopSpr');\r\n        this.muneSpr = this.owner.getChildByName('muneSpr');\r\n        this.rankSpr = this.owner.getChildByName('rankSpr');\r\n        this.leadOutSpr1 = this.owner.getChildByName('leadOutSpr1');\r\n        this.leadOutSpr2 = this.owner.getChildByName('leadOutSpr2');\r\n        this.leadOutSpr3 = this.owner.getChildByName('leadOutSpr3');\r\n        this.leadOutSpr4 = this.owner.getChildByName('leadOutSpr4');\r\n        this.leadOutSpr_1 = this.leadOutSpr1.getChildByName('leadOutSpr_1');\r\n        this.leadOutSpr_2 = this.leadOutSpr2.getChildByName('leadOutSpr_2');\r\n        this.leadOutSpr_3 = this.leadOutSpr3.getChildByName('leadOutSpr_3');\r\n        this.leadOutSpr_4 = this.leadOutSpr4.getChildByName('leadOutSpr_4');\r\n        this.signSpr = this.owner.getChildByName(\"signSpr\");\r\n        this.pointSpr = this.signSpr.getChildByName(\"pointSpr\");\r\n        this.pointSpr.visible = !SignModle.getTodaySigned();\r\n    }\r\n    initView() {\r\n        if (StaticData.level == 0) {\r\n            this.stationNameLb.text = \"\";\r\n            this.nowStationLb.text = \"出发地\";\r\n        }\r\n        else {\r\n            this.stationNameLb.text = \"- 第 \" + (StaticData.level) + \" 站 -\";\r\n        }\r\n        GameManage.manageOwner.gameState = GameState.NOT_START;\r\n        this.startGameSpr.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.shopSpr.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.rankSpr.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.muneSpr.on(Laya.Event.CLICK, this, this.onClickAction);\r\n        this.signSpr.on(Laya.Event.CLICK, this, this.onClickAction);\r\n    }\r\n    adapterWindow() {\r\n        super.adapterWindow();\r\n        this.startTxtSpr.y += StaticData.offY;\r\n        this.muneSpr.y += 173 * StaticData.heightOffsetScale;\r\n        this.rankSpr.y += 173 * StaticData.heightOffsetScale;\r\n        this.shopSpr.y += 173 * StaticData.heightOffsetScale;\r\n        this.signSpr.y += 173 * StaticData.heightOffsetScale;\r\n        this.leadOutSpr1.y += 173 * StaticData.heightOffsetScale;\r\n        this.leadOutSpr2.y += 173 * StaticData.heightOffsetScale;\r\n        this.leadOutSpr3.y += 173 * StaticData.heightOffsetScale;\r\n        this.leadOutSpr4.y += 173 * StaticData.heightOffsetScale;\r\n        if (GamePlatform.platformName != GamePlatform.WX) {\r\n            this.rankSpr.visible = false;\r\n            this.muneSpr.y = this.rankSpr.y;\r\n        }\r\n        WxADUtil.showStartBannerAd();\r\n    }\r\n    setLeadOutData() {\r\n        if (GamePlatform.platformName != GamePlatform.WX) {\r\n            return;\r\n        }\r\n        this.loadTime++;\r\n        if (this.loadTime > 10) {\r\n            console.log(\"导出加载失败\");\r\n            return;\r\n        }\r\n        if (StaticData.gameList != null && StaticData.getGameListSize() > 4) {\r\n            this.hadLoadGameList = true;\r\n            let cmaskSpr = new Laya.Sprite();\r\n            cmaskSpr.width = 100;\r\n            cmaskSpr.height = 100;\r\n            cmaskSpr.loadImage(\"images/leadout_icon_bg.png\");\r\n            this.listGame = StaticData.getGameListRadom(4);\r\n            if (this.listGame != null) {\r\n                this.leadOutSpr_1.loadImage(this.listGame[0].img, Laya.Handler.create(this, () => {\r\n                    this.leadOutSpr_1.mask = cmaskSpr;\r\n                }));\r\n                this.leadOutSpr_2.loadImage(this.listGame[1].img, Laya.Handler.create(this, () => {\r\n                    this.leadOutSpr_2.mask = cmaskSpr;\r\n                }));\r\n                this.leadOutSpr_3.loadImage(this.listGame[2].img, Laya.Handler.create(this, () => {\r\n                    this.leadOutSpr_3.mask = cmaskSpr;\r\n                }));\r\n                this.leadOutSpr_4.loadImage(this.listGame[3].img, Laya.Handler.create(this, () => {\r\n                    this.leadOutSpr_4.mask = cmaskSpr;\r\n                }));\r\n                this.leadOutSpr_1.on(Laya.Event.CLICK, this, this.onClickAction);\r\n                this.leadOutSpr_2.on(Laya.Event.CLICK, this, this.onClickAction);\r\n                this.leadOutSpr_3.on(Laya.Event.CLICK, this, this.onClickAction);\r\n                this.leadOutSpr_4.on(Laya.Event.CLICK, this, this.onClickAction);\r\n                this.leadOutSpr1.visible = true;\r\n                this.leadOutSpr2.visible = true;\r\n                this.leadOutSpr3.visible = true;\r\n                this.leadOutSpr4.visible = true;\r\n            }\r\n        }\r\n        else {\r\n            this.hadLoadGameList = false;\r\n            Laya.timer.clearAll(this);\r\n            Laya.timer.once(1000, this, this.setLeadOutData, null, false);\r\n        }\r\n    }\r\n    onClickAction(e) {\r\n        switch (e.target.name) {\r\n            case \"startGameSpr\":\r\n                this.startGame();\r\n                break;\r\n            case \"shopSpr\":\r\n                this.shop();\r\n                break;\r\n            case \"muneSpr\":\r\n                this.mune();\r\n                break;\r\n            case \"rankSpr\":\r\n                this.rank();\r\n                break;\r\n            case \"signSpr\":\r\n                this.sign();\r\n                break;\r\n            case \"leadOutSpr_1\":\r\n                LeadOutUtil.leadOut(this.listGame[0], \"\\u9996\\u9875-\\u53F31\\u5BFC\\u51FA\");\r\n                break;\r\n            case \"leadOutSpr_2\":\r\n                LeadOutUtil.leadOut(this.listGame[1], \"\\u9996\\u9875-\\u53F32\\u5BFC\\u51FA\");\r\n                break;\r\n            case \"leadOutSpr_3\":\r\n                LeadOutUtil.leadOut(this.listGame[2], \"\\u9996\\u9875-\\u53F33\\u5BFC\\u51FA\");\r\n                break;\r\n            case \"leadOutSpr_4\":\r\n                LeadOutUtil.leadOut(this.listGame[3], \"\\u9996\\u9875-\\u53F34\\u5BFC\\u51FA\");\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    shop() {\r\n        AldUtil.upload(\"\\u9996\\u9875-\\u76AE\\u80A4\");\r\n        Laya.Dialog.open(ConfigData.ShopDialog);\r\n    }\r\n    rank() {\r\n        AldUtil.upload(\"\\u9996\\u9875-\\u6392\\u884C\");\r\n        Laya.Dialog.open(ConfigData.RankDialog);\r\n    }\r\n    mune() {\r\n        AldUtil.upload(\"\\u9996\\u9875-\\u83DC\\u5355\");\r\n        Laya.Dialog.open(ConfigData.MuneDialog);\r\n    }\r\n    sign() {\r\n        AldUtil.upload(\"\\u9996\\u9875-\\u7B7E\\u5230\");\r\n        Laya.Dialog.open(ConfigData.SignDialog);\r\n    }\r\n    startGame() {\r\n        GameManage.manageOwner.gameStart(true);\r\n        this.owner.close();\r\n        if (LocalStorageUtil.getBoolean(\"isNewUser\", true)) {\r\n            LocalStorageUtil.setBoolean(\"isNewUser\", false);\r\n        }\r\n        else {\r\n            Laya.Dialog.open(ConfigData.SkinFreeDialog);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaModle/melee/src/manages/dialogManage/BaseDialogManage.ts",
    "E:/LayaModle/melee/src/data/StaticData.ts",
    "E:/LayaModle/melee/src/config/ConfigData.ts",
    "E:/LayaModle/melee/src/manages/GameManage.ts",
    "E:/LayaModle/melee/src/utils/LeadOutUtil.ts",
    "E:/LayaModle/melee/src/utils/AldUtil.ts",
    "E:/LayaModle/melee/src/utils/WxADUtil.ts",
    "E:/LayaModle/melee/src/modle/CoinModle.ts",
    "E:/LayaModle/melee/src/modle/SignModle.ts",
    "E:/LayaModle/melee/src/utils/LocalStorageUtil.ts",
    "E:/LayaModle/melee/src/adapter/GamePlatform.ts",
    "E:/LayaModle/melee/src/data/GameState.ts",
    "E:/LayaModle/melee/src/runtimes/LeadOutListRunTime.ts",
    "E:/LayaModle/melee/src/utils/ThreePartyUtil.ts"
  ]
}
