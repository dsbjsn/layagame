{
  "code": "import LocalStorageUtil from \"../utils/LocalStorageUtil\";\r\nimport CoinModle from \"./CoinModle\";\r\nimport SkinModle from \"./SkinModle\";\r\nimport BaseModle from \"./BaseModle\";\r\nexport default class SignModle extends BaseModle {\r\n    static init() {\r\n        SignModle.lastSignDate = LocalStorageUtil.getNumber(SignModle.KEY_LastSignDate);\r\n        SignModle.lastSignMonth = LocalStorageUtil.getNumber(SignModle.KEY_LastSignMonth);\r\n        SignModle.hadCarAward = LocalStorageUtil.getNumber(SignModle.KEY_hadCarAward);\r\n        let date = new Date();\r\n        let today_date = date.getDate();\r\n        let today_month = date.getMonth() + 1;\r\n        SignModle.todaySigned = (SignModle.lastSignDate == today_date && SignModle.lastSignMonth == today_month);\r\n        SignModle.signDays = LocalStorageUtil.getNumber(SignModle.KEY_SignDays);\r\n        if (SignModle.signDays == 7 && !SignModle.todaySigned) {\r\n            SignModle.signDays = 0;\r\n            LocalStorageUtil.add(SignModle.KEY_SignDays, SignModle.signDays);\r\n        }\r\n    }\r\n    static getSignDays() {\r\n        return SignModle.signDays;\r\n    }\r\n    static getLastSignDate() {\r\n        return SignModle.lastSignDate;\r\n    }\r\n    static getTodaySigned() {\r\n        return SignModle.todaySigned;\r\n    }\r\n    static sign(doubleAward) {\r\n        if (SignModle.signDays == 6) {\r\n            if (SignModle.hadCarAward == 0) {\r\n                SkinModle.addCarSkin(SignModle.carAward.id);\r\n                SignModle.hadCarAward = 1;\r\n                LocalStorageUtil.add(SignModle.KEY_hadCarAward, SignModle.hadCarAward);\r\n            }\r\n            else {\r\n                let coinNum = SignModle.coinNum[SignModle.signDays];\r\n                if (doubleAward) {\r\n                    CoinModle.addCoin(coinNum * 2);\r\n                }\r\n                else {\r\n                    CoinModle.addCoin(coinNum);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let coinNum = SignModle.coinNum[SignModle.signDays];\r\n            if (doubleAward) {\r\n                CoinModle.addCoin(coinNum * 2);\r\n            }\r\n            else {\r\n                CoinModle.addCoin(coinNum);\r\n            }\r\n        }\r\n        SignModle.signDays += 1;\r\n        LocalStorageUtil.add(SignModle.KEY_SignDays, SignModle.signDays);\r\n        let date = new Date();\r\n        SignModle.lastSignMonth = date.getMonth() + 1;\r\n        SignModle.lastSignDate = date.getDate();\r\n        LocalStorageUtil.add(SignModle.KEY_LastSignMonth, SignModle.lastSignMonth);\r\n        LocalStorageUtil.add(SignModle.KEY_LastSignDate, SignModle.lastSignDate);\r\n        SignModle.todaySigned = true;\r\n    }\r\n    static isLastDay(today_date, today_month) {\r\n        if (today_month == SignModle.lastSignMonth + 1 || (today_month == 1 && SignModle.lastSignMonth == 12)) {\r\n            if ((SignModle.lastSignMonth == 1\r\n                || SignModle.lastSignMonth == 3\r\n                || SignModle.lastSignMonth == 5\r\n                || SignModle.lastSignMonth == 7\r\n                || SignModle.lastSignMonth == 8\r\n                || SignModle.lastSignMonth == 10\r\n                || SignModle.lastSignMonth == 12)\r\n                && SignModle.lastSignDate == 31) {\r\n                return true;\r\n            }\r\n            else if ((SignModle.lastSignMonth == 4\r\n                || SignModle.lastSignMonth == 6\r\n                || SignModle.lastSignMonth == 9\r\n                || SignModle.lastSignMonth == 11)\r\n                && SignModle.lastSignDate == 30) {\r\n                return true;\r\n            }\r\n            else if (SignModle.lastSignMonth == 2\r\n                && (SignModle.lastSignDate == 28 || SignModle.lastSignDate == 29)) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n}\r\nSignModle.KEY_SignDays = \"KEY_SignDays\";\r\nSignModle.KEY_LastSignDate = \"KEY_LastSignDate\";\r\nSignModle.KEY_LastSignMonth = \"KEY_LastSignMonth\";\r\nSignModle.KEY_hadCarAward = \"KEY_hadCarAward\";\r\nSignModle.signDays = 0;\r\nSignModle.lastSignDate = 0;\r\nSignModle.lastSignMonth = 0;\r\nSignModle.todaySigned = false;\r\nSignModle.hadCarAward = 0;\r\nSignModle.coinNum = [50, 80, 120, 180, 280, 400, 600];\r\nSignModle.carAward = { \"id\": 8, \"name\": \"爱心踏板车\", \"img\": \"images/carSkin/carSkinBig/car_skin_8.png\", \"x\": 253, \"y\": 44 };\r\n",
  "references": [
    "E:/LayaModle/melee/src/utils/SingtonClass.ts",
    "E:/LayaModle/melee/src/utils/LocalStorageUtil.ts",
    "E:/LayaModle/melee/src/utils/TipsUtil.ts",
    "E:/LayaModle/melee/src/modle/CoinModle.ts",
    "E:/LayaModle/melee/src/modle/SkinModle.ts",
    "E:/LayaModle/melee/src/modle/BaseModle.ts"
  ]
}
