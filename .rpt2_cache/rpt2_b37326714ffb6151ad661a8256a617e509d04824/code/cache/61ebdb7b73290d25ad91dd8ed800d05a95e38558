{
  "code": "import LocalStorageUtil from \"../utils/LocalStorageUtil\";\r\nimport BaseModle from \"./BaseModle\";\r\nimport TipsUtil from \"../utils/TipsUtil\";\r\nimport AldUtil from \"../utils/AldUtil\";\r\nimport EnumSkinUtil from \"../data/EnumHttp\";\r\nexport default class SkinModle extends BaseModle {\r\n    static init(skin1, skin2) {\r\n        this.carSkinInfo = skin1;\r\n        this.eggSkinInfo = skin2;\r\n        let hadBuy = LocalStorageUtil.getString(this.hadBuyCarKey);\r\n        let buyJson;\r\n        if (hadBuy && hadBuy != null) {\r\n            buyJson = JSON.parse(hadBuy);\r\n        }\r\n        for (let cs of this.carSkinInfo) {\r\n            cs.hadBuy = cs.id == \"1\";\r\n            if (buyJson != null) {\r\n                for (let i of buyJson) {\r\n                    if (cs.id == Number(i)) {\r\n                        cs.hadBuy = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        let hadBuyEgg = LocalStorageUtil.getString(this.hadBuyEggKey);\r\n        let buyEggJson;\r\n        if (hadBuyEgg && hadBuyEgg != null) {\r\n            buyEggJson = JSON.parse(hadBuyEgg);\r\n        }\r\n        for (let cs of this.eggSkinInfo) {\r\n            cs.hadBuy = cs.id == \"1\";\r\n            if (buyEggJson != null) {\r\n                for (let i of buyEggJson) {\r\n                    if (cs.id == Number(i)) {\r\n                        cs.hadBuy = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (LocalStorageUtil.getString(this.useCarSkinKey) == null || LocalStorageUtil.getString(this.useCarSkinKey).length <= 0) {\r\n            this.selectCarSkinID = \"1\";\r\n        }\r\n        else {\r\n            this.selectCarSkinID = LocalStorageUtil.getString(this.useCarSkinKey);\r\n        }\r\n        if (LocalStorageUtil.getString(this.useEggSkinKey) == null || LocalStorageUtil.getString(this.useEggSkinKey).length <= 0) {\r\n            this.selectEggSkinID = \"1\";\r\n        }\r\n        else {\r\n            this.selectEggSkinID = LocalStorageUtil.getString(this.useEggSkinKey);\r\n        }\r\n        if (this.selectCarSkinID == \"0\") {\r\n            this.selectCarSkinID = \"1\";\r\n            this.setSelectCarSkinID(this.selectCarSkinID);\r\n        }\r\n        if (this.selectEggSkinID == \"0\") {\r\n            this.selectEggSkinID = \"1\";\r\n            this.setSelectCarSkinID(this.selectEggSkinID);\r\n        }\r\n    }\r\n    static setSelectCarSkinID(id) {\r\n        this.selectCarSkinID = id;\r\n        LocalStorageUtil.add(this.useCarSkinKey, this.selectCarSkinID);\r\n    }\r\n    static getCarSkins() {\r\n        return this.carSkinInfo;\r\n    }\r\n    static getCarSkinById(id) {\r\n        if (this.carSkinInfo != null && this.carSkinInfo.length > 0) {\r\n            for (let skin of this.carSkinInfo) {\r\n                if (skin.id == id) {\r\n                    return skin;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static getCarSkin(p) {\r\n        if (this.carSkinInfo != null && this.carSkinInfo.length > 0) {\r\n            return this.carSkinInfo[p];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static getSelectCarSkin() {\r\n        if (this.freeCarSkinID != \"0\") {\r\n            let skin = this.getCarSkinById(this.freeCarSkinID);\r\n            return skin;\r\n        }\r\n        else {\r\n            let skin = this.getCarSkinById(this.selectCarSkinID);\r\n            return skin;\r\n        }\r\n    }\r\n    static addCarSkin(id) {\r\n        let hadBuy = LocalStorageUtil.getString(this.hadBuyCarKey);\r\n        let buyJson;\r\n        if (hadBuy && hadBuy != null) {\r\n            buyJson = JSON.parse(hadBuy);\r\n        }\r\n        else {\r\n            buyJson = [];\r\n        }\r\n        buyJson.push(id);\r\n        LocalStorageUtil.add(this.hadBuyCarKey, JSON.stringify(buyJson));\r\n        AldUtil.upload(EnumSkinUtil.getBuyCarSkin(id));\r\n        for (let cs of this.carSkinInfo) {\r\n            if (cs.id == id) {\r\n                TipsUtil.msg(\"恭喜获得新皮肤\");\r\n                cs.hadBuy = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    static setSelectEggSkinID(id) {\r\n        this.selectEggSkinID = id;\r\n        LocalStorageUtil.add(this.useEggSkinKey, this.selectEggSkinID);\r\n    }\r\n    static getEggSkins() {\r\n        return this.eggSkinInfo;\r\n    }\r\n    static getEggSkin(p) {\r\n        if (this.eggSkinInfo != null && this.eggSkinInfo.length > 0) {\r\n            return this.eggSkinInfo[p];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static getEggSkinById(id) {\r\n        if (this.eggSkinInfo != null && this.eggSkinInfo.length > 0) {\r\n            for (let skin of this.eggSkinInfo) {\r\n                if (skin.id == id) {\r\n                    return skin;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static getSelectEggSkin() {\r\n        if (this.freeEggSkinID != \"0\") {\r\n            return this.getEggSkinById(this.freeEggSkinID);\r\n        }\r\n        else {\r\n            return this.getEggSkinById(this.selectEggSkinID);\r\n        }\r\n    }\r\n    static addEggSkin(id) {\r\n        let hadBuy = LocalStorageUtil.getString(this.hadBuyEggKey);\r\n        let buyJson;\r\n        if (hadBuy && hadBuy != null) {\r\n            buyJson = JSON.parse(hadBuy);\r\n        }\r\n        else {\r\n            buyJson = [];\r\n        }\r\n        AldUtil.upload(EnumSkinUtil.getBuyEggSkin(id));\r\n        buyJson.push(id);\r\n        LocalStorageUtil.add(this.hadBuyEggKey, JSON.stringify(buyJson));\r\n        for (let cs of this.eggSkinInfo) {\r\n            if (cs.id == id) {\r\n                cs.hadBuy = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nSkinModle.selectCarSkinID = \"1\";\r\nSkinModle.selectEggSkinID = \"1\";\r\nSkinModle.freeCarSkinID = \"0\";\r\nSkinModle.freeEggSkinID = \"0\";\r\nSkinModle.hadBuyCarKey = \"hadBuyCar\";\r\nSkinModle.hadBuyEggKey = \"hadBuyEgg\";\r\nSkinModle.useCarSkinKey = \"useCarSkinKey\";\r\nSkinModle.useEggSkinKey = \"useEggSkinKey\";\r\n",
  "references": [
    "E:/LayaModle/melee/src/utils/SingtonClass.ts",
    "E:/LayaModle/melee/src/utils/LocalStorageUtil.ts",
    "E:/LayaModle/melee/src/modle/BaseModle.ts",
    "E:/LayaModle/melee/src/utils/TipsUtil.ts",
    "E:/LayaModle/melee/src/utils/AldUtil.ts",
    "E:/LayaModle/melee/src/data/EnumHttp.ts"
  ]
}
