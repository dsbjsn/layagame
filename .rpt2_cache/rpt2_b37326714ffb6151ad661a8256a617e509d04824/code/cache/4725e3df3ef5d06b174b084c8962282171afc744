{
  "code": "import CoinModle from \"../../modle/CoinModle\";\r\nimport ConfigData from \"../../config/ConfigData\";\r\nimport StaticData from \"../../data/StaticData\";\r\nimport WxADUtil from \"../../utils/WxADUtil\";\r\nimport AldUtil from \"../../utils/AldUtil\";\r\nimport DialogModle from \"../../modle/DialogModle\";\r\nimport ViewUtil from \"../../utils/ViewUtil\";\r\nexport default class BaseDialogManage extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.isShowBanner = false;\r\n        this.hadLoadGameList = false;\r\n        BaseDialogManage.Instance = this;\r\n    }\r\n    static getInstance() {\r\n        return BaseDialogManage.Instance;\r\n    }\r\n    onEnable() {\r\n        console.log(\"------------------onEnable\");\r\n        DialogModle.addDialog(this.owner.url);\r\n        WxADUtil.hideBannerAd();\r\n        this.contentSpr = this.owner.getChildByName(\"contentSpr\");\r\n        if (this.contentSpr) {\r\n            this.initActionSprite();\r\n        }\r\n        this.findView();\r\n        this.initView();\r\n        this.adapterWindow();\r\n        this.initData();\r\n        this.setLeadOutData();\r\n        if (this.no && !this.isShowBanner) {\r\n            this.setIsShowMisLead(StaticData.isMisLead);\r\n        }\r\n        this.startAni();\r\n        this.initCoin();\r\n    }\r\n    onStart() {\r\n        switch (this.owner.url) {\r\n            case ConfigData.StartGameDialog:\r\n                AldUtil.upload(\"\\u9996\\u9875\");\r\n                break;\r\n            case ConfigData.GameOverDialog:\r\n                AldUtil.upload(\"\\u590D\\u6D3B\\u9875\");\r\n                break;\r\n            case ConfigData.GetCoinTimesDialog:\r\n                AldUtil.upload(\"\\u6E38\\u620F\\u5931\\u8D25\\u91D1\\u5E01\\u7ED3\\u7B97\\u9875\");\r\n                break;\r\n            case ConfigData.GameFinishDialog:\r\n                AldUtil.upload(\"\\u518D\\u6765\\u4E00\\u6B21\\u9875\");\r\n                break;\r\n            case ConfigData.AwardDialog:\r\n                AldUtil.upload(\"\\u901A\\u5173\\u9875\");\r\n                break;\r\n            case ConfigData.PauseDialog:\r\n                AldUtil.upload(\"\\u6682\\u505C\\u9875\");\r\n                break;\r\n            case ConfigData.MuneDialog:\r\n                AldUtil.upload(\"\\u83DC\\u5355\\u9875\");\r\n                break;\r\n            case ConfigData.RankDialog:\r\n                AldUtil.upload(\"\\u6392\\u884C\\u9875\");\r\n                break;\r\n            case ConfigData.ShopDialog:\r\n                AldUtil.upload(\"\\u5546\\u57CE\\u9875\");\r\n                break;\r\n            case ConfigData.SignDialog:\r\n                AldUtil.upload(\"\\u7B7E\\u5230\\u9875\");\r\n                break;\r\n            case ConfigData.SkinFreeDialog:\r\n                AldUtil.upload(\"\\u76AE\\u80A4\\u8BD5\\u7528\\u9875\");\r\n                break;\r\n            case ConfigData.FLBoxDialog:\r\n                AldUtil.upload(\"\\u5B9D\\u7BB1\\u9875\");\r\n                break;\r\n            case ConfigData.OthersGamesDialog:\r\n                AldUtil.upload(\"\\u5176\\u4ED6\\u6E38\\u620F\\u9875\");\r\n                break;\r\n            default: break;\r\n        }\r\n    }\r\n    onDisable() {\r\n        DialogModle.popDialog();\r\n        console.log(\"-------------onDisable\");\r\n        Laya.timer.clearAll(this);\r\n        Laya.Tween.clearAll(this);\r\n        WxADUtil.hideBannerAd();\r\n        this.isShowBanner = false;\r\n    }\r\n    onDestroy() {\r\n        console.log(\"-------------onDestroy\");\r\n        Laya.timer.clearAll(this);\r\n        Laya.Tween.clearAll(this);\r\n        this.isShowBanner = false;\r\n        WxADUtil.hideBannerAd();\r\n    }\r\n    findView() { }\r\n    ;\r\n    initView() { }\r\n    ;\r\n    adapterWindow() {\r\n        this.owner.height = StaticData.gameHeight;\r\n        this.owner.pos(0, 0);\r\n        if (this.midleLeadOutSpr) {\r\n            this.midleLeadOutSpr.y += 222 * StaticData.heightOffsetScale;\r\n        }\r\n        if (this.yes) {\r\n            this.yes.y += 248 * StaticData.heightOffsetScale;\r\n            this.scaleBYes(this.yes);\r\n        }\r\n        if (this.no) {\r\n            this.no.y += 243 * StaticData.heightOffsetScale;\r\n        }\r\n    }\r\n    scaleBYes(view) {\r\n        Laya.Tween.to(view, { scaleX: 1.1, scaleY: 1.1 }, 500, null, Laya.Handler.create(this, () => {\r\n            this.scaleSYes(view);\r\n        }));\r\n    }\r\n    scaleSYes(view) {\r\n        Laya.Tween.to(view, { scaleX: 1, scaleY: 1 }, 500, null, Laya.Handler.create(this, () => {\r\n            this.scaleBYes(view);\r\n        }));\r\n    }\r\n    initData() { }\r\n    ;\r\n    setLeadOutData() { }\r\n    yesAction() { }\r\n    noAction() { }\r\n    cancelAction() { }\r\n    onClickAction(v) { }\r\n    ;\r\n    setIsShowMisLead(isShow, view) {\r\n        let oldY;\r\n        if (isShow) {\r\n            if (view == null) {\r\n                view = this.no;\r\n                oldY = view.y;\r\n                view.y = WxADUtil.getADMidleY() > 1150 ? WxADUtil.getADMidleY() : 1150;\r\n            }\r\n            else {\r\n                oldY = view.y;\r\n                view.y = StaticData.gameHeight - 200;\r\n            }\r\n            view.visible = true;\r\n            try {\r\n                Laya.timer.clearAll(this);\r\n                Laya.timer.once(1000, this, () => {\r\n                    this.isShowBanner = true;\r\n                    WxADUtil.showBannerAd();\r\n                    Laya.Tween.to(view, { \"y\": oldY }, 300, null, null, 200);\r\n                });\r\n            }\r\n            catch (error) { }\r\n        }\r\n        else {\r\n            this.isShowBanner = true;\r\n            WxADUtil.showBannerAd();\r\n            if (view == null) {\r\n                this.no.visible = false;\r\n                this.no.fontSize = 30;\r\n                this.no.alpha = 0.3;\r\n                Laya.timer.once(1000, this, function () {\r\n                    this.no.visible = true;\r\n                });\r\n            }\r\n            else {\r\n                view.visible = true;\r\n            }\r\n        }\r\n    }\r\n    startAni() {\r\n        let goOn = true;\r\n        let id = 1;\r\n        while (goOn) {\r\n            let name = \"ani\" + id;\r\n            let ani = this.owner[name];\r\n            if (ani != null) {\r\n                ani.play();\r\n                id++;\r\n            }\r\n            else {\r\n                goOn = false;\r\n            }\r\n        }\r\n    }\r\n    initActionSprite() {\r\n        this.yes = this.contentSpr.getChildByName(\"yes\");\r\n        this.no = this.contentSpr.getChildByName(\"no\");\r\n        this.cancel = this.contentSpr.getChildByName(\"cancel\");\r\n        this.midleLeadOutSpr = this.contentSpr.getChildByName(\"listSpr\");\r\n        this.horizontalLeadOutSpr = this.contentSpr.getChildByName(\"bottomLeadOut\");\r\n        if (this.yes) {\r\n            this.yes.on(Laya.Event.CLICK, this, () => {\r\n                this.yesAction();\r\n            });\r\n        }\r\n        if (this.no) {\r\n            this.no.on(Laya.Event.CLICK, this, () => {\r\n                this.noAction();\r\n            });\r\n        }\r\n        if (this.cancel) {\r\n            this.cancel.on(Laya.Event.CLICK, this, () => {\r\n                this.cancelAction();\r\n            });\r\n        }\r\n    }\r\n    initCoin() {\r\n        this.coinBox = this.owner.getChildByName(\"coinBox\");\r\n        if (this.coinBox != null) {\r\n            ViewUtil.adapterPositionJL(this.coinBox);\r\n            this.refreshCoin();\r\n        }\r\n    }\r\n    ;\r\n    refreshCoin() {\r\n        if (this.coinBox != null) {\r\n            let coinLb = this.coinBox.getChildByName(\"coinLb\");\r\n            let coinNum = CoinModle.getCoin();\r\n            if (coinLb != null) {\r\n                if (coinNum >= 10000) {\r\n                    coinLb.text = (coinNum / 1000).toFixed(1) + \"k\";\r\n                }\r\n                else {\r\n                    coinLb.text = String(coinNum);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaModle/melee/src/data/beans/AwardType.ts",
    "E:/LayaModle/melee/src/modle/CoinModle.ts",
    "E:/LayaModle/melee/src/config/ConfigData.ts",
    "E:/LayaModle/melee/src/manages/GameManage.ts",
    "E:/LayaModle/melee/src/utils/TipsUtil.ts",
    "E:/LayaModle/melee/src/data/StaticData.ts",
    "E:/LayaModle/melee/src/utils/WxADUtil.ts",
    "E:/LayaModle/melee/src/runtimes/LeadOutListRunTime.ts",
    "E:/LayaModle/melee/src/runtimes/LeadOutGridRunTime.ts",
    "E:/LayaModle/melee/src/adapter/GamePlatform.ts",
    "E:/LayaModle/melee/src/utils/AldUtil.ts",
    "E:/LayaModle/melee/src/modle/DialogModle.ts",
    "E:/LayaModle/melee/src/utils/ViewUtil.ts"
  ]
}
