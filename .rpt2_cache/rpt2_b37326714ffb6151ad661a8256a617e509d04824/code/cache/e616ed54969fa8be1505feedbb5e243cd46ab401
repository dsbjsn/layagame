{
  "code": "import BaseDialogManage from \"./BaseDialogManage\";\r\nimport SkinModle from \"../../modle/SkinModle\";\r\nimport SkinConfig from \"../../config/CarSkinConfig\";\r\nimport WxADUtil from \"../../utils/WxADUtil\";\r\nimport StaticData from \"../../data/StaticData\";\r\nimport AldUtil from \"../../utils/AldUtil\";\r\nimport GameManage from \"../../manages/GameManage\";\r\nexport default class SkinFreeDialogManage extends BaseDialogManage {\r\n    findView() {\r\n        this.titleLb = this.contentSpr.getChildByName(\"titleLb\");\r\n        this.midleBg = this.contentSpr.getChildByName(\"midleBg\");\r\n        this.freeSkinList = this.contentSpr.getChildByName(\"freeSkinList\");\r\n    }\r\n    initView() {\r\n        StaticData.carOrEggFree = !StaticData.carOrEggFree;\r\n        this.freeSkins = [];\r\n        let go = true;\r\n        while (go) {\r\n            let skinId;\r\n            if (StaticData.carOrEggFree) {\r\n                skinId = Math.round((Math.random() * 9)) + 2;\r\n                skinId = Math.min(11, skinId);\r\n                skinId = Math.max(2, skinId);\r\n                if (skinId == 9) {\r\n                    skinId = 8;\r\n                }\r\n            }\r\n            else {\r\n                skinId = Math.round((Math.random() * 7)) + 2;\r\n                skinId = Math.min(9, skinId);\r\n                skinId = Math.max(2, skinId);\r\n            }\r\n            if (String(skinId) != SkinModle.selectCarSkinID) {\r\n                let isAdd = false;\r\n                for (let id of this.freeSkins) {\r\n                    if (id == skinId) {\r\n                        isAdd = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!isAdd) {\r\n                    this.freeSkins.push(skinId);\r\n                }\r\n                if (this.freeSkins.length == 4) {\r\n                    go = false;\r\n                }\r\n            }\r\n        }\r\n        this.freeSkinList.array = this.freeSkins;\r\n        this.freeSkinList.renderHandler = Laya.Handler.create(this, this.updateItem, null, false);\r\n    }\r\n    updateItem(call, index) {\r\n        let item = this.freeSkins[index];\r\n        if (item != null) {\r\n            let carSkinSpr = call.getChildByName(\"carSkinSpr\");\r\n            let eggSkinSpr = call.getChildByName(\"eggSkinSpr\");\r\n            let userBtn = call.getChildByName(\"userBtn\");\r\n            if (StaticData.carOrEggFree) {\r\n                carSkinSpr.loadImage(SkinConfig.getCarSkinBig(item));\r\n            }\r\n            else {\r\n                eggSkinSpr.loadImage(SkinConfig.getEggSkinBig(item));\r\n            }\r\n            userBtn.on(Laya.Event.CLICK, this, () => {\r\n                AldUtil.upload(\"\\u968F\\u673A\\u76AE\\u80A4\\u8BD5\\u7528-\\u4F7F\\u7528\");\r\n                WxADUtil.adOrShare({\r\n                    success: () => {\r\n                        if (StaticData.carOrEggFree) {\r\n                            SkinModle.freeCarSkinID = String(item);\r\n                        }\r\n                        else {\r\n                            SkinModle.freeEggSkinID = String(item);\r\n                        }\r\n                        this.owner.close();\r\n                    },\r\n                    fail: () => {\r\n                        this.owner.close();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            call.visible = false;\r\n        }\r\n    }\r\n    adapterWindow() {\r\n        super.adapterWindow();\r\n        this.titleLb.y += 222 * StaticData.heightOffsetScale;\r\n        this.midleBg.y += 222 * StaticData.heightOffsetScale;\r\n        this.freeSkinList.y += 222 * StaticData.heightOffsetScale;\r\n    }\r\n    yesAction() {\r\n        AldUtil.upload(\"\\u968F\\u673A\\u76AE\\u80A4\\u8BD5\\u7528-\\u4F7F\\u7528\");\r\n        WxADUtil.adOrShare({\r\n            success: () => {\r\n                let freeId = String(this.freeSkins[Math.round(Math.random() * 3)]);\r\n                if (StaticData.carOrEggFree) {\r\n                    SkinModle.freeCarSkinID = freeId;\r\n                }\r\n                else {\r\n                    SkinModle.freeEggSkinID = freeId;\r\n                }\r\n                this.owner.close();\r\n            },\r\n            fail: () => {\r\n                this.owner.close();\r\n            }\r\n        });\r\n    }\r\n    noAction() {\r\n        AldUtil.upload(\"\\u968F\\u673A\\u76AE\\u80A4\\u8BD5\\u7528-\\u8DF3\\u8FC7\");\r\n        this.owner.close();\r\n    }\r\n    onDisable() {\r\n        super.onDisable();\r\n        WxADUtil.hideBannerAd();\r\n        GameManage.manageOwner.gameStart(false);\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaModle/melee/src/manages/dialogManage/BaseDialogManage.ts",
    "E:/LayaModle/melee/src/modle/SkinModle.ts",
    "E:/LayaModle/melee/src/config/CarSkinConfig.ts",
    "E:/LayaModle/melee/src/utils/WxADUtil.ts",
    "E:/LayaModle/melee/src/data/StaticData.ts",
    "E:/LayaModle/melee/src/utils/AldUtil.ts",
    "E:/LayaModle/melee/src/manages/GameManage.ts"
  ]
}
