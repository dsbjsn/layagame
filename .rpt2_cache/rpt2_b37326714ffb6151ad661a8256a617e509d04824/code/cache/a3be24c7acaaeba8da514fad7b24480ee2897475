{
  "code": "import StaticData from \"../data/StaticData\";\r\nimport LeadOutUtil from \"../utils/LeadOutUtil\";\r\nimport GamePlatform from \"../adapter/GamePlatform\";\r\nexport default class LeadOutListRunTime extends Laya.Sprite {\r\n    constructor() {\r\n        super();\r\n        this.hadLoadGameList = false;\r\n        this.scroll = 0;\r\n        this.offScroll = -2;\r\n        this.loadTime = 0;\r\n        this.show = true;\r\n        LeadOutListRunTime._instance = this;\r\n    }\r\n    static getInstance() {\r\n        return LeadOutListRunTime._instance;\r\n    }\r\n    onEnable() {\r\n        this.visible = false;\r\n        this.gameList = this.getChildByName(\"gameList\");\r\n    }\r\n    init(isBottom) {\r\n        if (GamePlatform.platformName == GamePlatform.WX) {\r\n            if (isBottom) {\r\n                this.y = StaticData.gameHeight - this.height;\r\n                if (StaticData.isIphoneX) {\r\n                    this.y -= 50;\r\n                }\r\n            }\r\n            this.initData();\r\n        }\r\n        else {\r\n            this.visible = false;\r\n        }\r\n    }\r\n    initData() {\r\n        this.loadTime++;\r\n        if (this.loadTime > 10) {\r\n            this.visible = false;\r\n            return;\r\n        }\r\n        this.gl = StaticData.getGameListRadom(StaticData.getGameListSize());\r\n        if (this.gl != null && this.gl.length > 0) {\r\n            if (this.show) {\r\n                this.visible = true;\r\n            }\r\n            this.hadLoadGameList = true;\r\n            var path;\r\n            let cmaskSpr = new Laya.Sprite();\r\n            cmaskSpr.width = 138;\r\n            cmaskSpr.height = 138;\r\n            cmaskSpr.loadImage(\"images/leadout_icon_bg.png\");\r\n            for (let i = 0; i < this.gl.length; i++) {\r\n                let itemDate = this.gl[i];\r\n                let itemView = this.gameList.getChildAt(i);\r\n                let gameIcon = itemView.getChildByName(\"gameIcon\");\r\n                let gameName = itemView.getChildByName(\"gameName\");\r\n                if (gameIcon != null) {\r\n                    gameIcon.loadImage(itemDate.img, Laya.Handler.create(this, () => {\r\n                        gameIcon.mask = cmaskSpr;\r\n                    }));\r\n                }\r\n                gameName.text = itemDate.title;\r\n                itemView.on(Laya.Event.CLICK, this, function () {\r\n                    LeadOutUtil.leadOut(itemDate, this.ald_pois);\r\n                });\r\n            }\r\n            Laya.timer.frameLoop(2, this, () => {\r\n                this.scroll += this.offScroll;\r\n                if (this.scroll <= (-this.gameList.width + StaticData.gameWidth)) {\r\n                    this.offScroll *= -1;\r\n                }\r\n                else if (this.scroll >= 0) {\r\n                    this.offScroll *= -1;\r\n                }\r\n                this.gameList.x = this.scroll;\r\n            });\r\n        }\r\n        else {\r\n            this.hadLoadGameList = false;\r\n            Laya.timer.clearAll(this);\r\n            Laya.timer.once(1000, this, this.initData);\r\n        }\r\n    }\r\n    setAldPois(pois) {\r\n        this.ald_pois = pois;\r\n        console.log(\"LeadOutListRunTime 阿拉丁代号：\", pois);\r\n    }\r\n    ;\r\n    isShow(isShow) {\r\n        this.show = isShow;\r\n        this.visible = isShow;\r\n    }\r\n}\r\n",
  "references": [
    "E:/LayaModle/melee/src/data/StaticData.ts",
    "E:/LayaModle/melee/src/utils/LeadOutUtil.ts",
    "E:/LayaModle/melee/src/config/ConfigData.ts",
    "E:/LayaModle/melee/src/adapter/GamePlatform.ts"
  ]
}
